<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memoPage</title>
</head>
<body>
    <header>
     <div><input type="button" value="추가" onclick="addMemoEvent()"></div>

    </header>
    <main>
        <div id="mainDiv"></div>
    </main>
    <script>

        fetch("/memo/memoMainPage")
            .then((response) => response.json())
            .then((data) => {
                console.log(data.rows[0].memoid)//data는 백엔드에서 넘어 오는 json 배열로 담은 데이터이다.  
                let cnt=0;
                for(let index=0; index<data.rows.length; index++){
                    let resutlDiv=document.getElementById("mainDiv")

                    let newContentDiv=document.createElement("div")
                    newContentDiv.setAttribute("id",cnt)
                    resutlDiv.appendChild(newContentDiv)
                    newContentDiv.innerHTML=data.rows[index].memotitle //제목
                    newContentDiv.addEventListener("click", function(){viewMemo(this.id)})//제목을 클릭 했을 경우 

                    let newWriteDateDiv=document.createElement("div")
                    newWriteDateDiv.setAttribute("id",cnt)
                    resutlDiv.appendChild(newWriteDateDiv)
                    newWriteDateDiv.innerHTML=data.rows[index].memodate

                    let newUserDiv=document.createElement("div")
                    newUserDiv.setAttribute("id",cnt)
                    resutlDiv.appendChild(newUserDiv)
                    newUserDiv.innerHTML=data.rows[index].userid
                    cnt=cnt+1
                }

            })// 백엔드에서 보내준 json 형태의 데이터
     
        
        const addMemoEvent=()=>{
            location.href="/addMemo"
        } 

        const viewMemo = (index) =>{//클릭이 메모에 몇번째가 되는 지를 받아 올 수 있다. 
            console.log(index)
           //ocation.href="comentViewPage.html"
           location.href = "/coment/comentView?index=" + index;
        }
    </script>
</body>
</html>